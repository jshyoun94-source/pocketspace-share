# 두 번째 앱스토어 심사 거부 – 보완 가이드 (2026.02.06)

2월 6일 재심사 결과, 4가지 거부 사유가 발생했습니다.  
**심사 기기:** iPad Air 11-inch (M3), iPadOS 26.2.1  
**심사 날짜:** 2026년 2월 6일

---

## 1. Guideline 2.1 – 동네생활/동네부탁 무한 로딩 버그 ⭐ (우선 수정)

**거부 사유:**  
"The app loaded indefinitely when we tapped on '동네생활' and '동네부탁'."

**원인:**  
- `community.tsx`, `request.tsx` 모두 **위치(currentLocation)** 를 먼저 가져온 뒤 데이터를 로드합니다.
- iPad에서 위치 권한 거부/지연 또는 `getCurrentPositionAsync` 미완료 시 `currentLocation` 이 null로 유지됩니다.
- `if (!currentLocation) return;` 때문에 `setLoading(false)` 가 호출되지 않아 **로딩이 끝나지 않음**.

**보완 방법:**

1. **위치 없을 때도 로딩 종료**
   - 위치를 가져오지 못했을 때 `setLoading(false)` 를 호출하고, 빈 목록 또는 안내 메시지를 표시합니다.
   - 예: “위치 권한을 허용하면 주변 게시글을 볼 수 있어요.”

2. **타임아웃 추가**
   - `getCurrentPositionAsync` 에 타임아웃을 두어, 일정 시간 후에도 위치를 못 받으면 기본 좌표(예: 서울 시청)로 폴백합니다.
   - 이렇게 하면 iPad 시뮬레이터에서도 기본 위치로 데이터를 로드할 수 있습니다.

3. **iPad에서 재현·테스트**
   - iPad 시뮬레이터 또는 실제 iPad에서 **동네생활**, **동네부탁** 탭을 눌렀을 때 무한 로딩 없이 화면이 표시되는지 확인합니다.

---

## 2. Guideline 2.1 – 데모 계정 (Information Needed) ⭐ (필수)

**거부 사유:**  
"We were unable to sign in when 2FA was required for review."  
또한 **"demo account with pre-populated content for 'Chat' feature"** 를 요청했습니다.

**보완 방법:**

1. **App Store Connect에 데모 계정 등록**
   - **앱** → **PocketSpace** → **앱 심사 정보** (App Review Information)  
   - **로그인 계정** (Demo Account) 란에 **2FA가 꺼진** 테스트 계정의 **아이디/비밀번호** 입력.
   - 심사팀이 그 계정으로 로그인해 전체 기능을 확인할 수 있어야 합니다.

2. **채팅에 미리 데이터 넣어 두기**
   - 심사용 계정으로:
     - 동네부탁 또는 보관 채팅을 1~2개 생성하고
     - 메시지 2~3줄 이상 보내서
   - 채팅 탭에 실제 채팅 목록이 보이도록 합니다.

3. **주의**
   - 2FA(이중 인증)를 **반드시 끄고** 사용할 수 있는 계정을 제공해야 합니다.
   - 데모 영상으로 대체할 수 없다는 점이 명시되어 있으므로, **실제 로그인 가능한 계정**이 필요합니다.

---

## 3. Guideline 5.1.1(v) – 계정 삭제 기능 ⭐ (필수)

**거부 사유:**  
"The app supports account creation but does not include an option to initiate account deletion."

**보완 방법:**

1. **계정 삭제(탈퇴) 기능 추가**
   - 프로필 화면(또는 설정 화면)에 **"계정 삭제"** / **"회원 탈퇴"** 메뉴를 추가합니다.
   - 탭 시 확인 다이얼로그 후, 실제로 계정을 삭제하는 플로우를 구현합니다.

2. **구현 시 필수 사항**
   - **일시 비활성화만으로는 부족**합니다. 완전 삭제가 되어야 합니다.
   - 웹에서만 삭제할 수 있다면, 앱 내에서 **해당 웹페이지로 바로 이동하는 링크**를 제공해야 합니다.
   - 실수 방지를 위해 **확인 단계**를 두는 것은 허용됩니다.

3. **참고**
   - Firebase Auth `deleteUser()` + Firestore `users` 문서 삭제 및 관련 데이터 정리 로직이 필요합니다.
   - 삭제 후 로그인 화면으로 이동시키면 됩니다.

---

## 4. Guideline 4.8 – 로그인 서비스 (동등한 로그인 옵션)

**거부 사유:**  
Third-party 로그인을 사용하지만, 아래 3가지를 모두 만족하는 **동등한 로그인 옵션**을 제공하지 않는다고 판단됨.

- 데이터 수집을 이름·이메일 수준으로 제한
- 이메일 비공개 옵션 제공
- 동의 없이 광고 목적 수집 금지

**보완 방법 (택 1):**

### A. Sign in with Apple 추가 (권장)

- Apple이 위 조건을 모두 만족한다고 명시한 **Sign in with Apple** 을 로그인 화면에 추가합니다.
- `expo-apple-authentication` + Firebase Auth 연동 등으로 구현할 수 있습니다.

### B. 기존 로그인으로 답변

- 네이버·카카오·구글이 위 3가지를 충족한다고 판단되면,  
  App Store Connect의 **심사 팀에 대한 답글** 에서 **어떤 로그인이 어떻게 조건을 만족하는지** 구체적으로 적어 제출합니다.
- 이전에도 동일 설명을 했으나 이번에도 거부되었으므로, **Sign in with Apple 추가**가 더 확실한 방법입니다.

---

## 요약 체크리스트

| # | 항목 | 우선순위 | 담당 |
|---|------|----------|------|
| 1 | 동네생활/동네부탁 무한 로딩 버그 수정 (위치 없을 때 로딩 종료) | ⭐ 필수 | 개발 |
| 2 | App Store Connect에 데모 계정 등록 (2FA 끈 계정, 채팅 데이터 있음) | ⭐ 필수 | 운영/App Store Connect |
| 3 | 프로필(설정)에 계정 삭제/탈퇴 기능 추가 | ⭐ 필수 | 개발 |
| 4 | Sign in with Apple 추가 (또는 기존 로그인 설명 강화) | 권장 | 개발 |

---

## 제출 전 확인 사항

1. **iPad** 에서 동네생활·동네부탁 탭이 무한 로딩 없이 정상 동작하는지 확인
2. App Store Connect **데모 계정** 란에 2FA 없는 계정 + 채팅 데이터가 있는지 확인
3. 프로필(설정) 화면에 **계정 삭제** 메뉴가 실제로 동작하는지 확인
4. **Sign in with Apple** 또는 심사 팀 답글로 4.8 요구사항 충족 여부 확인

---

## Apple이 제공한 스크린샷

심사팀이 캡처한 4개의 스크린샷이 App Store Connect에 있을 수 있습니다.  
**다운로드** 후 어떤 상황에서 문제가 발생했는지 확인하면 보완에 도움이 됩니다.

---

이 문서는 2026.02.06 심사 거부 사유를 기준으로 작성되었습니다.
