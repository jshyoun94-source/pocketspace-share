# 개발 시 체크리스트 (최신 번들 / Apple 로그인 등)

실기기와 시뮬이 엇갈려 보이거나, 터미널/Metro가 헷갈릴 때 아래만 순서대로 확인하면 됩니다.

---

## 1. 터미널이 정말 하나만 쓰이는지

- **Metro를 띄우는 건 터미널 1개**면 됩니다.
- **확인 방법**
  - `expo start` / `npm run dev` / `npm run dev:ios` / `npm run dev:fresh` 를 **실행 중인 터미널이 1개**인지 봅니다.
  - 다른 터미널에서는 **Metro를 띄우는 명령을 실행하지 않았는지** 확인합니다.
- **추가 확인 (선택)**  
  터미널에서:
  ```bash
  lsof -i :8081
  ```
  - **COMMAND** 열에 `node`가 **1개**만 나오면 Metro가 하나만 떠 있는 것입니다. 2개 이상이면 Metro가 두 번 켜진 것이니, 터미널을 하나만 남기고 나머지는 Ctrl+C로 종료하세요.

---

## 2. 실기기 vs 시뮬 – 왜 다르게 보이나

- **실기기(휴대폰)**와 **시뮬레이터**는 **각각 따로** 번들을 받습니다.
  - 실기기: 마지막으로 연결했던 Metro에서 받은 번들을 **기기에 캐시**해 둡니다.
  - 시뮬: 시뮬에 저장된 **캐시**를 씁니다.
- 그래서 **실기기에는 Apple 로그인이 보이는데, 시뮬에는 안 보이는** 식으로 **엇갈려 보일 수** 있습니다. (지금은 시뮬에도 보이는 것 같지만, 예전에 그랬다면 이 때문입니다.)
- **휴대폰에서 앱을 꺼야 하나?**
  - **꺼야 할 필요는 없습니다.** 실기기에 최신이 잘 나오고 있다면 그대로 두면 됩니다.
  - 다만 **개발할 때**는 보통 **시뮬**만 쓰거나 **실기기**만 쓰는 편이 낫습니다. 둘 다 쓰면 “어디가 최신이지?” 헷갈릴 수 있어요.

---

## 3. 앞으로 개발할 때 – 한 가지 흐름만 쓰기

- **시뮬만 쓸 때**
  1. Metro 띄우는 터미널 **1개만** 둡니다.
  2. `npm run dev` 또는 (처음이거나 예전 버전 나왔을 때) `npm run dev:fresh` 실행.
  3. 앱은 **시뮬에서만** 띄우고, **시뮬에서 앱 아이콘만 눌러서** 다시 여는 건 피합니다.
- **실기기만 쓸 때**
  1. 같은 방식으로 **Metro 터미널 1개**에서 `npm run dev:ios` (또는 `npm run dev`) 실행.
  2. 실기기에서 앱을 열고, **Enter URL manually**에 터미널에 나온 주소(예: `http://172.16.1.205:8081`) 입력해 **그 Metro에만** 연결되게 합니다.
  3. 실기기에서도 **아이콘만 눌러서** 켜면 예전 캐시가 나올 수 있으니, **개발 중에는 Metro 띄운 뒤 앱에서 URL로 연결**하는 흐름을 쓰는 게 좋습니다.

---

## 4. 한 번에 점검하는 순서 (요약)

| 확인할 것 | 어떻게 보나 |
|-----------|-------------|
| Metro 터미널 1개만? | `expo start` / `npm run dev` 등 켜 둔 터미널 개수 세기 |
| 8081 포트 1개만? | 터미널에서 `lsof -i :8081` → `node` 1개만 있는지 |
| 시뮬 최신인지? | 로그인 화면에 Apple 로그인 있는지, 프로필 → 설정 맨 아래 문구 있는지 |
| 실기기 꺼야 하나? | 안 꺼도 됨. 대신 개발 시 시뮬/실기기 중 하나만 쓰면 헷갈리지 않음 |
| 포트 통일됐나? | 스크립트에 `--port 8081` 들어가 있음. 터미널에 8081만 보이면 됨 |

---

## 5. 문제 나왔을 때 한 번만 할 것

- **시뮬에서 예전 버전만 나올 때**
  1. 시뮬에서 **PocketSpace 앱 삭제**.
  2. Metro 켜 둔 터미널 **다 Ctrl+C로 종료**.
  3. 터미널 **한 개**만 열고: `npm run dev:fresh`.
  4. 앱 뜬 뒤 로그인 화면에 **Apple 로그인** 있는지, 프로필 → 설정에 **회원 탈퇴**와 맨 아래 문구 있는지 확인.

이 체크리스트만 지키면 “실기기랑 시뮬이 엇갈린 것 같다”, “터미널이 여러 개인 것 같다” 할 때 차근차근 맞출 수 있습니다.
