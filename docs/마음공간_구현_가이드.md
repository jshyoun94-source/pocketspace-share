# 마음공간(Mind Space) 구현 가이드

## 개요

당근마켓 매너온도와 유사한 **마음공간** 평가 시스템이 적용되었습니다.

## 1. Firestore 구조

### users
- `mindSpace` (number, optional): 0~100. 신규 사용자 기본값 50

### transactions (새 컬렉션)
- `spaceId`, `spaceTitle`, `spaceAddress`, `spaceImages`
- `ownerId`, `ownerName`, `customerId`, `customerName`
- `chatId`: 연결된 채팅방 ID
- `status`: "보관신청중" | "보관중" | "보관종료"
- `createdAt`, `updatedAt`, `completedAt`
- `ownerEvaluatedCustomer`, `customerEvaluatedOwner` (boolean)
- `ownerEvaluation`: { schedule, manners } - 공간대여자가 사용자 평가 시
- `customerEvaluation`: { schedule, storageCondition, manners } - 사용자가 공간대여자 평가 시

## 2. 거래 플로우

1. **보관신청중**: 사용자가 "보관 신청" 클릭
2. **보관중**: 공간대여자가 "보관 시작" 클릭
3. **보관종료**: 어느 쪽이든 "보관 종료" 클릭 → 상호 평가 가능

## 3. 별점 → 마음공간 변동

| 평균 별점 | 변동 |
|----------|------|
| 5.0 | +0.3 |
| 4.0~4.9 | +0.2 |
| 3.0~3.9 | +0.1 |
| 2.0~2.9 | -0.1 |
| 1.0~1.9 | -0.2 |

단일 거래당 한 번만 평가 가능 (각자 1회).

## 4. Firestore 규칙 배포

```bash
firebase deploy --only firestore:rules
```

## 5. 정책 문구

- "마음공간은 다른 이용자의 참고를 위한 지표이며, 공간 상태나 이용 결과를 보증하지 않습니다."
- "개별 거래의 만족도나 결과와는 다를 수 있습니다."

→ 이용약관 등에 추후 추가 예정.
